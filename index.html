<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Microlearn Bio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#15171A" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <button class="icon-button back-button hidden" id="backButton" aria-label="Back">‚Üê</button>
      <div class="header-title">
        <span id="headerSubtitle" class="header-subtitle"></span>
        <h1 id="headerTitle" class="header-main"></h1>
      </div>
      <button class="icon-button" id="themeToggle" aria-label="Toggle theme">‚òæ</button>
    </header>

    <main class="app-main">
      <!-- Screen 1: Level selection (AS / A2) -->
      <section id="screenLevels" class="screen active">
        <div class="hero">
          <h2>Microlearning for A-Level Biology</h2>
          <p>Swipe-style revision in tiny, human-sized pieces.</p>
        </div>
        <div class="card-grid">
          <button class="card card-select" data-level="as">
            <h3>AS Level</h3>
            <p>11 chapters ¬∑ foundation concepts</p>
          </button>
          <button class="card card-select" data-level="a2">
            <h3>A2 Level</h3>
            <p>8 chapters ¬∑ advanced topics</p>
          </button>
        </div>
      </section>

      <!-- Screen 2: Chapter list -->
      <section id="screenChapters" class="screen hidden">
        <div id="chaptersList" class="card-list"></div>
      </section>

      <!-- Screen 3: Chapter modes (Story / Questions / Difficult) -->
      <section id="screenChapter" class="screen hidden">
        <div class="tabs" id="modeTabs">
          <button class="tab active" data-mode="story">Story</button>
          <button class="tab" data-mode="questions">Questions</button>
          <button class="tab" data-mode="difficult">Difficult</button>
        </div>

        <div class="progress-wrapper">
          <div class="progress-label" id="progressLabel">0 / 0</div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </div>

        <!-- Story mode content -->
        <div id="storyMode" class="mode-panel active">
          <div id="storyFeed" class="bubble-feed"></div>
        </div>

        <!-- Question mode content -->
        <div id="questionsMode" class="mode-panel hidden">
          <div id="questionArea" class="qa-wrapper"></div>
        </div>
        <!-- Difficult mode -->
        <div id="difficultMode" class="mode-panel hidden">
          <!-- List view -->
          <div id="difficultListView">
            <div class="difficult-revise">
              <div class="difficult-revise-top">
                <div class="difficult-revise-title">Revision session</div>
                <div class="difficult-revise-sub">Practice your saved items, one by one.</div>
              </div>

              <div class="difficult-revise-actions">
                <button id="difficultReviseStory" class="revise-btn" type="button">Revise Story</button>
                <button id="difficultReviseQuestions" class="revise-btn" type="button">Revise Questions</button>
              </div>

              <div class="difficult-revise-count">
                <span class="difficult-revise-label">How many</span>
                <div id="difficultCountSeg" class="segmented" role="group" aria-label="How many items to revise">
                  <button class="seg-btn is-active" type="button" data-count="all">All</button>
                  <button class="seg-btn" type="button" data-count="10">10</button>
                  <button class="seg-btn" type="button" data-count="20">20</button>
                  <button class="seg-btn" type="button" data-count="30">30</button>
                </div>
              </div>
            </div>

            <div id="difficultEmpty" class="empty-state">
              Nothing here yet. Tap the <span aria-hidden="true">üìò</span> button to save anything you find difficult.
            </div>
            <ul id="difficultList" class="difficult-list"></ul>
          </div>

          <!-- Revision session view -->
          <div id="difficultSessionView" class="hidden">
            <div id="difficultSessionFeed" class="bubble-feed hidden"></div>
            <div id="difficultSessionQA" class="qa-wrapper hidden"></div>
            <div id="difficultSessionDone" class="empty-state hidden">
              Session complete. Tap <span aria-hidden="true">‚Üê</span> to return to your list.
            </div>
          </div>
        </div>

        <!-- Floating actions (Story + Questions only) -->
        <div id="actionDock" class="action-dock hidden" aria-label="Actions">
          <button id="actionLeft" class="fab fab--circle" aria-label="Add to Difficult" title="Add to Difficult">üìò</button>
          <button id="actionRight" class="fab fab--circle fab--primary" aria-label="OK" title="OK">OK</button>
        </div>
      </section>
    </main>
  </div>

  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <script src="script.js" defer></script>
</body>
</html>
